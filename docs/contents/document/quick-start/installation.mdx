---
id: installation
title: Installation
sidebar_position: 2
---

```mdx-code-block
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
```

# Install abe-kafka

This page shows how to install and enable the Kafka backend in your environment.

## 1) Install the package

```bash
pip install abe-kafka
# or
uv add abe-kafka
```

## 2) Enable the Kafka backend

Set the entry-point backend name and minimal configuration:

```bash
export MESSAGE_QUEUE_BACKEND=kafka
export KAFKA_BOOTSTRAP_SERVERS=localhost:9092
```

Optional security configuration:

```bash
# SASL/PLAIN
export KAFKA_SECURITY_PROTOCOL=SASL_PLAINTEXT
export KAFKA_SASL_MECHANISM=PLAIN
export KAFKA_SASL_USERNAME=my-user
export KAFKA_SASL_PASSWORD=my-pass

# SSL
export KAFKA_SECURITY_PROTOCOL=SSL
export KAFKA_SSL_CAFILE=/etc/ssl/ca.pem
export KAFKA_SSL_CERTFILE=/etc/ssl/cert.pem
export KAFKA_SSL_KEYFILE=/etc/ssl/key.pem
```

## 3) (Optional) Developer setup

```bash
uv sync
uv sync --group dev --group pre-commit-ci
uv run pre-commit install
```

## 4) Quick smoke test

```python
import asyncio
from abe_plugin.backends.message_queue.service.abe_kafka import KafkaMessageQueueBackend

async def main():
    b = KafkaMessageQueueBackend.from_env()
    await b.publish("demo-topic", {"hello": "world"})
    async for m in b.consume(group="g1"):
        print(m)
        break
    await b.close()

asyncio.run(main())
```

## 5) Run tests

```bash
# Unit tests
uv run pytest -q -v test/unit_test

# Integration tests (Docker required for Testcontainers)
uv run pytest -q -v -k test_publish_and_consume_roundtrip_with_testcontainers_threads test/integration_test/backend/queue/service/test_kafka.py

# Integration tests against your cluster (set SASL/SSL envs)
uv run pytest -q -v test/integration_test/backend/queue/service/test_kafka.py
```

## 6) Build docs (optional)

```bash
cd docs
pnpm install
pnpm build
```
